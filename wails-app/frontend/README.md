# ProcGuard Frontend

## Overview

The frontend is a Single Page Application (SPA) built with **Svelte 5** and **TypeScript**. It runs inside the Wails WebView2 container.

## Key Concepts

### 1. Wails Bindings (`window.go`)

The frontend communicates with the Go backend using the `window.go` object, which is auto-generated by Wails.

- **Location:** `wailsjs/go/main/App` and `wailsjs/go/api/Server`.
- **Usage:** `await window.go.main.App.MethodName()`.

### 2. Extension Detection (`extensionStore.ts`)

Because the Native Host is a separate process, the frontend cannot "ask" the backend variable if the extension is connected.

- **Mechanism:** Polling.
- **Logic:**
  1.  `extensionStore.ts` sets up a `setInterval` (every 3 seconds).
  2.  It calls `window.go.main.App.CheckChromeExtension()`.
  3.  The backend checks the `extension_heartbeat` file timestamp.
  4.  If valid, the store updates `$isExtensionInstalled` to `true`.

### 3. Web Management UI (`WebManagement.svelte`)

- **Leaderboard:** Fetches aggregated data via `GetWebLogs`.
- **Web Logs:** Displays raw history.
- **Blocklist:** Manages blocked domains.
- **Console Logging:** Extensive `console.log` is used in `WebLog.svelte` to debug data fetching, as silent failures are common in the WebView.

## Project Structure

- `src/App.svelte`: Main entry point. Handles routing (hash-based).
- `src/lib/`: Components and Stores.
  - `extensionStore.ts`: Global store for extension status.
  - `WebManagement.svelte`: Main container for web features.
  - `WebLog.svelte`: Web history view.
- `wailsjs/`: Auto-generated Wails bindings. **DO NOT EDIT MANUALLY.**

## Development

- **Linting:** `npm run lint` (Runs ESLint on `.ts` and `.svelte` files).
- **Building:** Handled by `wails build`.
